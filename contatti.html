<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tobia Miniutti | Contatti</title>
<link rel="icon" href="favicon.png" type="image/png" />
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --carbon:#0d0d0d;
  --carbon-deep:#090909;
  --golden:#c9a74c;
  --golden-light:#f3d97a;
  --muted:#b3b3b3;
  --white:#ffffff;
  --err:#ff6b6b;
  --radius:18px;
  --transition:0.35s cubic-bezier(.2,.9,.2,1);
  --glass: rgba(255,255,255,0.03);
}

/* Reset & base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:'Outfit',system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  background: linear-gradient(180deg,var(--carbon) 0%, var(--carbon-deep) 100%);
  color:var(--white);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.45;
}

/* Header (identico stile navbar precedente) */
header{
  backdrop-filter: blur(14px);
  background: rgba(255 255 255 / 0.05);
  padding:1.2rem 2rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:1000;
  box-shadow:0 2px 25px rgba(0,0,0,0.85);
}
.logo{height:42px; user-select:none; filter:drop-shadow(0 0 1.5px rgba(0,0,0,.6))}
nav a{
  color:var(--white);
  text-decoration:none;
  font-weight:600;
  margin-left:2.2rem;
  position:relative;
  transition:color var(--transition);
}
nav a::after{
  content:"";
  position:absolute;
  bottom:0; left:0;
  width:0; height:3px;
  background: linear-gradient(90deg,#008C45,#F4F5F0,#CD212A);
  border-radius:3px 3px 0 0;
  transition:width var(--transition);
}
nav a:hover::after, nav a:focus-visible::after{width:100%}
nav a:hover, nav a:focus-visible{color:var(--golden); outline:none}

/* Layout */
main{
  max-width: 980px;
  margin: 3.6rem auto 5rem;
  padding: 0 1.6rem;
}

/* Intro */
.header-block{
  text-align:center;
  margin-bottom:1.6rem;
}
.header-block h1{
  font-size:2.6rem;
  margin:0 0 .4rem 0;
  color:var(--golden);
  letter-spacing: .6px;
}
.header-block p{
  margin:0 auto;
  color:var(--muted);
  max-width:760px;
  font-size:1rem;
}

/* Form & grid */
.contact-grid{
  display:grid;
  grid-template-columns: 1fr 360px;
  gap: 2rem;
  align-items:start;
  margin-top:2.2rem;
}
@media (max-width:960px){
  .contact-grid{grid-template-columns:1fr; padding-bottom:1rem}
}

/* Form card */
.form-card{
  background: var(--glass);
  border-radius: var(--radius);
  padding:2.2rem;
  border:1px solid rgba(255,255,255,0.04);
  box-shadow: 0 10px 40px rgba(0,0,0,0.55);
  transform: translateY(20px);
  opacity:0;
  transition: transform .9s cubic-bezier(.2,.9,.2,1), opacity .9s ease;
}
.form-card.visible{ transform:none; opacity:1; }

/* Field styles */
.field{
  display:flex;
  flex-direction:column;
  gap:.45rem;
  margin-bottom:.9rem;
}
label{
  font-weight:600;
  color:var(--white);
  font-size:.98rem;
  user-select:none;
}
.input, textarea{
  padding: .95rem 1.1rem;
  border-radius:12px;
  border:2px solid rgba(201,167,76,0.12);
  background: rgba(255,255,255,0.02);
  color:var(--white);
  font-size:1rem;
  transition: box-shadow var(--transition), border-color var(--transition), transform var(--transition);
}
textarea{min-height:160px; resize:vertical}
.input:focus, textarea:focus{
  outline:none;
  border-color:var(--golden-light);
  box-shadow: 0 6px 30px rgba(201,167,76,0.12);
  transform: translateY(-1px);
}

/* live validation state */
.input.invalid, textarea.invalid{
  border-color: var(--err);
  box-shadow: 0 6px 20px rgba(255,80,80,0.08);
}
.error-message{
  color:var(--err);
  font-weight:600;
  font-size:.88rem;
  display:none;
}
.error-message.show{ display:block; }

/* Actions row */
.actions{
  display:flex;
  align-items:center;
  gap:1rem;
  margin-top:.2rem;
  justify-content:flex-start;
}
.submit-btn{
  display:inline-flex;
  align-items:center;
  gap:.8rem;
  padding:.95rem 1.6rem;
  border-radius:999px;
  border:none;
  background: linear-gradient(90deg,var(--golden) 0%, var(--golden-light) 100%);
  color: #0b0b0b;
  font-weight:700;
  cursor:pointer;
  box-shadow: 0 10px 30px rgba(201,167,76,0.18);
  transition: transform .22s var(--transition), box-shadow .22s var(--transition), opacity .22s var(--transition);
  position:relative; overflow:hidden;
}
.submit-btn:active{ transform:translateY(1px) }
.submit-btn[aria-disabled="true"]{ opacity:.7; pointer-events:none }

/* button loading shimmer */
.submit-btn .loader{
  width:18px; height:18px; border-radius:50%;
  border:2px solid rgba(0,0,0,0.15);
  border-top:2px solid rgba(255,255,255,0.85);
  animation: spin .9s linear infinite;
  display:inline-block;
}
@keyframes spin{ to{ transform:rotate(360deg)} }

/* success check animation */
.check{
  width:20px; height:20px; display:inline-block; transform:scale(0); opacity:0;
  transition: transform .45s cubic-bezier(.2,.9,.2,1), opacity .35s;
  color: #0b0b0b;
}
.submit-success .check{ transform:scale(1); opacity:1 }

/* status text */
.status{
  font-size:.95rem;
  color:var(--muted);
}

/* Right column - contact info */
.side-card{
  background: rgba(255,255,255,0.02);
  padding:1.6rem;
  border-radius:14px;
  border:1px solid rgba(255,255,255,0.03);
  box-shadow: 0 10px 36px rgba(0,0,0,0.45);
  transform: translateY(20px);
  opacity:0;
  transition: transform .9s cubic-bezier(.2,.9,.2,1), opacity .9s ease;
}
.side-card.visible{ transform:none; opacity:1; }
.side-card h4{ margin:0 0 .6rem 0; color:var(--golden)}
.side-card p{ margin:.35rem 0; color:var(--muted)}

/* icons row */
.contact-row{ display:flex; gap: .8rem; align-items:center; margin-top:.7rem; flex-wrap:wrap }
.icon-btn{
  display:inline-flex; align-items:center; gap:.7rem; padding:.55rem .8rem; border-radius:10px;
  background: rgba(255,255,255,0.02); color:var(--muted); border:1px solid transparent;
  transition: background var(--transition), color var(--transition), transform var(--transition);
}
.icon-btn svg{ width:18px; height:18px; display:block; fill:currentColor; transition: transform .22s var(--transition) }
.icon-btn:hover{ background: rgba(201,167,76,0.08); color:var(--golden); transform:translateY(-3px); }

/* subtle animated gradient background stripe (luxury touch) */
.bg-stripe{
  position:fixed; right:-10%; top:15%; width:420px; height:420px; pointer-events:none; z-index:0;
  background: radial-gradient(circle at 30% 20%, rgba(201,167,76,0.06), transparent 20%),
              radial-gradient(circle at 70% 80%, rgba(201,167,76,0.03), transparent 25%);
  filter: blur(30px); transform:scale(.95); opacity:.9;
}

/* entry reveal util */
.reveal{ opacity:0; transform:translateY(18px); transition:opacity .9s cubic-bezier(.2,.9,.2,1), transform .9s cubic-bezier(.2,.9,.2,1) }
.reveal.visible{ opacity:1; transform:none }

/* small screens */
@media (max-width:640px){
  .submit-btn{ width:100%; justify-content:center }
  .actions{ flex-direction:column; align-items:stretch }
  .contact-grid{ grid-template-columns: 1fr; gap:1.2rem }
  main{ margin:2rem 1rem 3rem }
}
</style>
</head>
<body>

<header>
  <a href="index.html" aria-label="miniutti.it - Home"><img src="favicon.png" class="logo" alt="logo" /></a>
  <nav>
    <a href="index.html">Home</a>
    <a href="portfolio.html">Portfolio</a>
    <a href="contatti.html" aria-current="page">Contatti</a>
  </nav>
</header>

<!-- decorative soft background glow -->
<div class="bg-stripe" aria-hidden="true"></div>

<main>
  <div class="header-block reveal" id="intro">
    <h1>Contattami</h1>
    <p>Hai un progetto, una collaborazione o vuoi semplicemente fare due chiacchiere creative? Compila il modulo qui sotto — rispondo sempre personalmente.</p>
  </div>

  <div class="contact-grid">
    <!-- FORM -->
    <form id="contactForm" class="form-card reveal" novalidate>
      <div class="field">
        <label for="name">Nome completo <span aria-hidden="true" style="color:var(--golden)">*</span></label>
        <input id="name" name="name" class="input" type="text" autocomplete="name" placeholder="Es. Marco Rossi" required />
        <div class="error-message" id="err-name">Per favore inserisci il tuo nome.</div>
      </div>

      <div class="field">
        <label for="email">Email <span aria-hidden="true" style="color:var(--golden)">*</span></label>
        <input id="email" name="email" class="input" type="email" autocomplete="email" placeholder="tuo@email.com" required />
        <div class="error-message" id="err-email">Inserisci una email valida.</div>
      </div>

      <div class="field">
        <label for="message">Messaggio <span aria-hidden="true" style="color:var(--golden)">*</span></label>
        <textarea id="message" name="message" class="input" placeholder="Raccontami il progetto..." required></textarea>
        <div class="error-message" id="err-message">Il messaggio non può essere vuoto.</div>
      </div>

      <div class="actions">
        <button class="submit-btn" type="submit" id="submitBtn" aria-live="polite" aria-disabled="false">
          <span class="btn-inner">
            <span class="label">Invia messaggio</span>
          </span>
        </button>

        <div class="status" id="statusText" aria-live="polite"></div>
      </div>
    </form>

    <!-- SIDE CONTACTS -->
    <aside class="side-card reveal" aria-labelledby="sideTitle">
      <h4 id="sideTitle">Altri modi per contattarmi</h4>
      <p>Preferisci email o messaggio diretto? Qui trovi tutti i riferimenti.</p>

      <div class="contact-row" style="margin-top:1rem;">
        <a class="icon-btn" href="mailto:tobia@miniutti.it" aria-label="Email"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M2 6.5v11A2.5 2.5 0 0 0 4.5 20h15a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 19.5 4h-15A2.5 2.5 0 0 0 2 6.5zm3.2-.2L12 12.1l6.8-6.8H5.2z"/></svg> <span>tobia@miniutti.it</span></a>

        <a class="icon-btn" href="tel:+393791128232" aria-label="Telefono"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79a15.05 15.05 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.02-.24c1.12.37 2.33.57 3.57.57a1 1 0 0 1 1 1V20a1 1 0 0 1-1 1A17 17 0 0 1 3 4a1 1 0 0 1 1-1h2.5a1 1 0 0 1 1 1c0 1.23.2 2.45.57 3.57a1 1 0 0 1-.24 1.02l-2.2 2.2z"/></svg> <span>+39 379 112 8232</span></a>

        <a class="icon-btn" href="https://www.instagram.com/tobia.miniutti" target="_blank" rel="noopener" aria-label="Instagram"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm8.5 4a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM12 8.5A3.5 3.5 0 1 0 12 15.5a3.5 3.5 0 0 0 0-7z"/></svg> <span>@tobia.miniutti</span></a>

        <a class="icon-btn" href="https://www.youtube.com/@tobia" target="_blank" rel="noopener" aria-label="YouTube"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 15l5.196-3L10 9v6zM21.8 8s-.2-1.5-.8-2.2c-.8-.9-1.6-.9-2-1C15.7 4.3 12 4.3 12 4.3h0s-3.7 0-6.9.5c-.4 0-1.2.1-2 .9-.6.7-.8 2.2-.8 2.2S2 9.9 2 11.7v0c0 1.8.2 3.7.2 3.7s.2 1.5.8 2.2c.8.9 1.9.9 2.4 1 1.7.2 7.6.5 7.6.5s3.7 0 6.9-.5c.4 0 1.2-.1 2-.9.6-.7.8-2.2.8-2.2s.2-1.9.2-3.7c0-1.8-.2-3.6-.2-3.6z"/></svg> <span>YouTube</span></a>
      </div>

      <div style="margin-top:1.2rem; border-top:1px dashed rgba(255,255,255,0.03); padding-top:1rem; color:var(--muted)">
        <p style="margin:0">Disponibilità: <strong style="color:var(--golden)">su appuntamento</strong></p>
      </div>
    </aside>
  </div>
</main>

<footer style="margin-top:3.2rem; padding:2.8rem 1.6rem; background: rgba(255,255,255,0.02); border-top:1px solid rgba(255,255,255,0.04);">
  <div style="max-width:980px;margin:0 auto; display:flex; gap:1rem; flex-wrap:wrap; align-items:center; justify-content:space-between;">
    <div style="color:var(--muted)">&copy; 2025 tobia.me — Tutti i diritti riservati</div>
    <div style="display:flex; gap:1rem; align-items:center">
      <a href="https://www.instagram.com/tobia.miniutti" style="color:var(--golden)" target="_blank" rel="noopener">Instagram</a>
      <a href="https://www.youtube.com/@tobia" style="color:var(--golden)" target="_blank" rel="noopener">YouTube</a>
      <a href="mailto:tobia@miniutti.it" style="color:var(--golden)">Email</a>
    </div>
  </div>
</footer>

<script>
/* IntersectionObserver reveals (intro, form, side) */
document.addEventListener('DOMContentLoaded', () => {
  const reveals = document.querySelectorAll('.reveal');
  const io = new IntersectionObserver((entries, obs) => {
    entries.forEach((entry) => {
      if(entry.isIntersecting){
        entry.target.classList.add('visible');
        obs.unobserve(entry.target);
      }
    });
  }, {threshold: 0.15});
  reveals.forEach(r => io.observe(r));
});

/* Live validation helpers */
const isEmail = (s) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim());

const showError = (el, msg){
  el.classList.add('invalid');
  const err = document.getElementById('err-' + el.id);
  if(err){ err.textContent = msg; err.classList.add('show'); }
}
const clearError = (el){
  el.classList.remove('invalid');
  const err = document.getElementById('err-' + el.id);
  if(err){ err.classList.remove('show'); }
}

/* Form handling: validation live + submit to Make webhook */
(function(){
  const form = document.getElementById('contactForm');
  const nameIn = document.getElementById('name');
  const emailIn = document.getElementById('email');
  const messageIn = document.getElementById('message');
  const submitBtn = document.getElementById('submitBtn');
  const statusText = document.getElementById('statusText');
  const WEBHOOK = 'https://hook.eu2.make.com/lndbgsb8ujjcwdrrwrpcxuqimnx6tjid';

  // live validation
  [nameIn, emailIn, messageIn].forEach(input => {
    input.addEventListener('input', () => {
      if(input.id === 'email'){
        if(isEmail(input.value)) clearError(input);
      } else {
        if(input.value.trim().length>0) clearError(input);
      }
    });
    input.addEventListener('blur', () => {
      if(input.id === 'email' && input.value && !isEmail(input.value)){
        showError(input, 'Inserisci una email valida.');
      } else if(!input.value.trim()){
        showError(input, input.id === 'message' ? 'Il messaggio non può essere vuoto.' : 'Per favore inserisci questo campo.');
      } else {
        clearError(input);
      }
    });
  });

  // helper to set button state
  function setLoading(on){
    if(on){
      submitBtn.setAttribute('aria-disabled','true');
      submitBtn.innerHTML = '<span class="loader" aria-hidden="true"></span><span style="opacity:0;margin-left:.45rem">Invio</span>';
    } else {
      submitBtn.removeAttribute('aria-disabled');
      submitBtn.innerHTML = '<span class="label">Invia messaggio</span>';
    }
  }

  // success micro-animation
  function showSuccess(msg){
    submitBtn.innerHTML = '<span class="check">✔</span> <span class="label">Inviato</span>';
    submitBtn.classList.add('submit-success');
    statusText.style.color = 'var(--golden)';
    statusText.textContent = msg || 'Messaggio inviato con successo!';
    setTimeout(()=> {
      // restore button after a short delay
      submitBtn.classList.remove('submit-success');
      submitBtn.innerHTML = '<span class="label">Invia messaggio</span>';
    }, 3500);
  }

  // Main submit
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    // clear previous
    statusText.textContent = '';
    clearError(nameIn); clearError(emailIn); clearError(messageIn);

    // validate
    let ok = true;
    if(!nameIn.value.trim()){ showError(nameIn, 'Per favore inserisci il tuo nome.'); ok=false; }
    if(!isEmail(emailIn.value)){ showError(emailIn, 'Inserisci una email valida.'); ok=false; }
    if(!messageIn.value.trim()){ showError(messageIn, 'Il messaggio non può essere vuoto.'); ok=false; }
    if(!ok) return;

    // send
    setLoading(true);
    try {
      const payload = {
        name: nameIn.value.trim(),
        email: emailIn.value.trim(),
        message: messageIn.value.trim()
      };

      const res = await fetch(WEBHOOK, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      if(!res.ok) throw new Error('Network');

      // success
      showSuccess('Messaggio inviato — ti rispondo a breve.');
      form.reset();
    } catch (err) {
      console.error(err);
      statusText.style.color = 'var(--err)';
      statusText.textContent = 'Errore durante l\'invio. Riprova più tardi.';
    } finally {
      setLoading(false);
    }
  });
})();
</script>
</body>
</html>
